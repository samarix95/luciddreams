(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{899:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),c=a(3),o=a.n(c),l=a(847),s=a.n(l),u=a(239),m=a(244),d=a(240),f=a(727),p=a(874),h=a.n(p),g=a(873),E=a.n(g),y=a(875),b=a.n(y),v=a(70),w=a(89),j=a(238),x=a(137),k=a(247),N=a(246),S=a(489),C=a(196),_=a(203),I=a(546),O=a(398),B=a.n(O),L=a(12);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function A(e){var t=Object(L.d)(),a=e.i,n=e.j,i=e.cellWidth,c=e.id,o=e.locations,l=e.palette,s=e.lang,u=e.history,f=e.user_id,p=e.posts,h=z(r.a.useState(null),2),g=h[0],E=h[1],y=z(r.a.useState(c||null),2),b=y[0],w=y[1],j=z(r.a.useState(0),2),O=j[0],A=j[1],M=Boolean(g),G=M?"simple-popover":void 0,R=b===c,T=function(e){var t=0;p.map((function(a){return a.tags.map((function(a){return parseInt(a[0])===e?t++:t+=0}))})),A(t)};return r.a.createElement("td",{style:{height:i+"px",minWidth:i+"px",maxWidth:i+"px",padding:0,margin:0,border:"1px rgb(128,128,128,0.8) solid"}},o.length?r.a.createElement("div",{className:t.aboutGridContainer,onClick:function(e){E(e.currentTarget),T(b)},style:"number"==typeof b?{backgroundImage:"url("+o.find((function(e){return e.id===b})).img_url+")",backgroundSize:"contain",backgroundColor:o.find((function(e){return e.id===b})).color,overflow:"hidden"}:{backgroundSize:"contain",backgroundColor:"rgb(192,192,192,0.6)",overflow:"hidden"}}):"",r.a.createElement(C.a,{id:G,open:M,anchorEl:g,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},r.a.createElement(d.a,{container:!0,className:"".concat(t.height12),direction:"column",justify:"center",alignItems:"stretch"},r.a.createElement(d.a,{item:!0,className:"".concat(t.mainGridBodyItem," ").concat(t.height11),style:{padding:"16px"}},o.length?r.a.createElement(d.a,{container:!0,className:"".concat(t.height12),direction:"column",justify:"center",alignItems:"stretch"},r.a.createElement(d.a,{item:!0,className:"".concat(t.height6)},r.a.createElement(d.a,{container:!0,className:"".concat(t.height12),direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(d.a,{item:!0,xs:10,style:{textAlign:"center",position:"relative"}},r.a.createElement(N.a,{variant:"h6",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},"number"==typeof b?"Ru"===s.currLang.current?o.find((function(e){return e.id===b})).name_rus:o.find((function(e){return e.id===b})).name_eng:s.currLang.texts.Nothink)),r.a.createElement(d.a,{item:!0,xs:2},r.a.createElement(k.a,{onClick:function(){u.push({pathname:"/addlocation",defaultData:{id:b,name_rus:o.find((function(e){return e.id===b})).name_rus,name_eng:o.find((function(e){return e.id===b})).name_eng,img_url:o.find((function(e){return e.id===b})).img_url,color:o.find((function(e){return e.id===b})).color,prevUrl:"/dreammap"}})},disabled:"number"!=typeof b},r.a.createElement(B.a,{fontSize:"small"}))))),r.a.createElement(d.a,{item:!0,className:"".concat(t.height6)},r.a.createElement(d.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(d.a,{item:!0},r.a.createElement(x.a,null,r.a.createElement(_.a,{value:"number"==typeof b?b:"",onChange:function(e){w(e.target.value),T(e.target.value)},MenuProps:{PaperProps:{style:{maxHeight:224,width:"auto"}}}},o.map((function(e,a){return r.a.createElement(S.a,{key:a,value:e.id},r.a.createElement(I.a,{className:t.smallAvatar,src:e.id?e.img_url:"https://static.thenounproject.com/png/1446402-200.png",style:"dark"===l.type?{filter:"invert(1)"}:{}}))}))))),r.a.createElement(d.a,{item:!0},r.a.createElement(m.a,{disabled:0===O,onClick:function(){alert("Посмотреть")}},s.currLang.texts.dreams,": ",O))))):""),r.a.createElement(d.a,{item:!0,className:"".concat(t.mainGridBodyItem," ").concat(t.height1)},r.a.createElement(d.a,{className:t.menuDivButton,container:!0,direction:"row",justify:"space-around",alignItems:"stretch",style:{padding:"16px"}},r.a.createElement(d.a,{item:!0,xs:6,align:"center"},r.a.createElement(m.a,{className:t.poppupButton,variant:"contained",color:"secondary",onClick:function(){w(c),E(null)}},s.currLang.texts.cancel)),r.a.createElement(d.a,{item:!0,xs:6,align:"center"},r.a.createElement(m.a,{className:t.poppupButton,disabled:R,variant:"contained",color:"primary",onClick:function(){var e={user_id:f,i:a,j:n};e.oldLoc=c,e.newLoc=b,v.a.post("/actions/users/updateusermap",e).then((function(e){})).catch((function(e){console.log(e)})),E(null)}},s.currLang.buttons.Save)))))))}A.propTypes={lang:o.a.object.isRequired,palette:o.a.object.isRequired};var M=Object(i.b)((function(e){return{lang:e.lang,palette:e.themeMode.palette}}),(function(e){return{}}))(A);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var R=.01*window.innerHeight*74.9/window.innerWidth*100,T=Math.round(window.innerWidth/20*1.5*.6);function W(e){var t=e.lang,a=e.themeMode,n=e.history,i=e.user_id,c=Object(L.d)(),o=Object(w.a)(a),l=G(r.a.useState({}),2),p=l[0],g=l[1],y=G(r.a.useState(null),2),x=y[0],k=y[1],N=G(r.a.useState(null),2),S=N[0],C=N[1],_=G(r.a.useState(1),2),I=_[0],O=_[1],B=r.a.useCallback((function(){v.a.get("/gettags").then((function(e){g([{id:null}].concat(e.data))})).catch((function(e){console.log(e)})),v.a.post("/actions/users/getusermap",{user_id:i}).then((function(e){k(JSON.parse(e.data.result))})).catch((function(e){console.log(e)}))}),[i]),z=r.a.useCallback((function(){v.a.post("/actions/users/getuserposts",{id:i}).then((function(e){C(e.data)})).catch((function(e){}))}),[i]);return r.a.useEffect((function(){B(),z()}),[B,z]),r.a.createElement(j.a,{theme:o},r.a.createElement(u.a,null),r.a.createElement("div",{className:c.root},r.a.createElement(d.a,{container:!0,className:"".concat(c.height12),direction:"column",justify:"center",alignItems:"stretch"},r.a.createElement(d.a,{item:!0,className:"".concat(c.hiddenOverflow," ").concat(c.height9)},r.a.createElement(s.a,{initialScale:I,maxScale:2.5,render:function(e){return r.a.createElement("div",{style:{paddingTop:R.toFixed(2)+"%",overflow:"hidden",height:"100%",width:"100%",position:"relative"}},r.a.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},r.a.createElement("table",{style:{width:"100%",height:"auto",transform:"scale(".concat(e.scale,") translateY(").concat(e.y,"px) translateX(").concat(e.x,"px)"),transition:"transform .1s",position:"relative",margin:"auto",borderCollapse:"collapse"}},r.a.createElement("tbody",null,null!==x?(t=[],a=0,c=0,Object.keys(x).forEach((function(e){var o=[];Object.keys(x[e]).forEach((function(t){o.push(r.a.createElement(M,{key:"cell"+a+c,i:a,j:c,cellWidth:T,dreamMap:x,id:x[e][t].id,locations:p,history:n,user_id:i,posts:S})),a++})),t.push(r.a.createElement("tr",{key:"row"+c},o)),c++,a=0})),t):r.a.createElement("tr",null,r.a.createElement("td",null))))));var t,a,c}})),r.a.createElement(d.a,{item:!0,className:"".concat(c.mainGridBodyItem," ").concat(c.height2)},r.a.createElement(d.a,{container:!0,className:c.mainGridContainer,direction:"row",justify:"space-evenly",alignItems:"center"},r.a.createElement(d.a,{item:!0,xs:2,align:"center"}),r.a.createElement(d.a,{item:!0,xs:2,align:"center"},r.a.createElement(f.a,{size:"small",onClick:function(){I-.25>.5&&O(I-.25)}},r.a.createElement(E.a,null))),r.a.createElement(d.a,{item:!0,xs:4,align:"center"},r.a.createElement(f.a,{size:"small",onClick:function(){return O(1)}},r.a.createElement(h.a,null))),r.a.createElement(d.a,{item:!0,xs:2,align:"center"},r.a.createElement(f.a,{size:"small",onClick:function(){I+.25<2.5&&O(I+.25)}},r.a.createElement(b.a,null))),r.a.createElement(d.a,{item:!0,xs:2,align:"center"}))),r.a.createElement(d.a,{item:!0,className:"".concat(c.mainGridBodyItem," ").concat(c.height1)},r.a.createElement(d.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center"},r.a.createElement(d.a,{item:!0},r.a.createElement(m.a,{className:c.actionButton,variant:"contained",color:"secondary",onClick:function(){n.push("/luciddreams")}},t.currLang.buttons.close)),r.a.createElement(d.a,{item:!0},r.a.createElement(m.a,{className:c.actionButton,variant:"contained",color:"primary",onClick:function(){n.push("/addlocation")}},t.currLang.buttons.add)))))))}W.propTypes={themeMode:o.a.object.isRequired,lang:o.a.object.isRequired,user_id:o.a.number.isRequired};t.default=Object(i.b)((function(e){return{themeMode:e.themeMode,lang:e.lang,user_id:e.auth.user.id}}),(function(e){return{}}))(W)}}]);
//# sourceMappingURL=13.index-bundle.js.map