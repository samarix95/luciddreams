(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{882:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a(3),i=a.n(o),l=a(848),u=a(254),s=a(245),m=a(252),d=a(250),f=a(246),p=a(724),g=a(850),h=a.n(g),E=a(849),y=a.n(E),b=a(851),v=a.n(b),j=a(70),w=a(89),k=a(244),x=a(142),N=a(253),O=a(500),S=a(201),C=a(208),I=a(416),_=a(318),z=a.n(_),L=a(12);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function B(e){var t=Object(L.d)(),a=e.i,n=e.j,c=e.cellWidth,o=e.id,i=e.locations,l=e.palette,u=e.lang,s=e.history,p=e.user_id,g=e.posts,h=e.viewMode,E=M(r.a.useState(null),2),y=E[0],b=E[1],v=M(r.a.useState(o||null),2),w=v[0],k=v[1],_=M(r.a.useState(0),2),B=_[0],T=_[1],A=Boolean(y),P=A?"simple-popover":void 0,W=w===o,D=function(e){var t=0;h||g.map((function(a){return a.tags.map((function(a){return parseInt(a[0])===e?t++:t+=0}))})),T(t)};return r.a.createElement("td",{style:{height:c+"px",minWidth:c+"px",maxWidth:c+"px",padding:0,margin:0,border:"1px rgb(128,128,128,0.8) solid"}},i.length?r.a.createElement("div",{className:t.aboutGridContainer,onClick:function(e){b(e.currentTarget),D(w)},style:"number"==typeof w?{backgroundImage:"url("+i.find((function(e){return e.id===w})).img_url+")",backgroundSize:"contain",backgroundColor:i.find((function(e){return e.id===w})).color,overflow:"hidden"}:{backgroundSize:"contain",backgroundColor:"rgb(192,192,192,0.6)",overflow:"hidden"}}):"",r.a.createElement(S.a,{id:P,open:A,anchorEl:y,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},r.a.createElement(f.a,{container:!0,className:"".concat(t.height12," ").concat(t.minWidth200px),direction:"column",justify:"center",alignItems:"stretch"},r.a.createElement(f.a,{item:!0,className:"".concat(t.mainGridBodyItem," ").concat(t.height11),style:{padding:"16px"}},i.length?r.a.createElement(f.a,{container:!0,className:"".concat(t.height12),direction:"column",justify:"center",alignItems:"stretch"},r.a.createElement(f.a,{item:!0,className:"".concat(t.height6," ").concat(t.minHeight20px)},r.a.createElement(f.a,{container:!0,className:"".concat(t.height12),direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(f.a,{item:!0,xs:10,style:{textAlign:"center",position:"relative"}},r.a.createElement(m.a,{className:"".concat(t.centerButton)},"number"==typeof w?"Ru"===u.currLang.current?i.find((function(e){return e.id===w})).name_rus:i.find((function(e){return e.id===w})).name_eng:u.currLang.texts.Nothink)),h?r.a.createElement(r.a.Fragment,null):r.a.createElement(f.a,{item:!0,xs:2},r.a.createElement(N.a,{onClick:function(){s.push({pathname:"/addlocation",defaultData:{id:w,name_rus:i.find((function(e){return e.id===w})).name_rus,name_eng:i.find((function(e){return e.id===w})).name_eng,img_url:i.find((function(e){return e.id===w})).img_url,color:i.find((function(e){return e.id===w})).color,prevUrl:"/dreammap"}})},disabled:"number"!=typeof w},r.a.createElement(z.a,{fontSize:"small"}))))),r.a.createElement(f.a,{item:!0,className:"".concat(t.height6)},r.a.createElement(f.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(f.a,{item:!0},r.a.createElement(x.a,null,r.a.createElement(C.a,{disabled:h,value:"number"==typeof w?w:"",onChange:function(e){k(e.target.value),D(e.target.value)},MenuProps:{PaperProps:{style:{maxHeight:224,width:"auto"}}}},i.map((function(e,a){return r.a.createElement(O.a,{key:a,value:e.id},r.a.createElement(I.a,{className:t.smallAvatar,src:e.id?e.img_url:"https://static.thenounproject.com/png/1446402-200.png",style:"dark"===l.type?{filter:"invert(1)"}:{}}))}))))),h?r.a.createElement(r.a.Fragment,null):r.a.createElement(f.a,{item:!0},r.a.createElement(d.a,{disabled:0===B,onClick:function(){s.push({pathname:"/dreams",defaultData:{mode:"fromMap",location:i.find((function(e){return e.id===w})),prevUrl:"/dreammap"}})}},u.currLang.texts.CountDreams,": ",B))))):""),r.a.createElement(f.a,{item:!0,className:"".concat(t.mainGridBodyItem," ").concat(t.height1)},r.a.createElement(f.a,{container:!0,direction:"row",justify:"space-around",alignItems:"stretch",style:{padding:"16px"}},r.a.createElement(f.a,{item:!0},r.a.createElement(d.a,{className:t.poppupButton,variant:"contained",color:"secondary",onClick:function(){k(o),b(null)}},u.currLang.buttons.close)),h?r.a.createElement(r.a.Fragment,null):r.a.createElement(f.a,{item:!0},r.a.createElement(d.a,{className:t.poppupButton,disabled:W,variant:"contained",color:"primary",onClick:function(){var e={user_id:p,i:a,j:n};e.oldLoc=o,e.newLoc=w,j.a.post("/actions/users/updateusermap",e).then((function(e){})).catch((function(e){console.log(e)})),b(null)}},u.currLang.buttons.Save)))))))}B.propTypes={lang:i.a.object.isRequired,palette:i.a.object.isRequired};var T=Object(c.b)((function(e){return{lang:e.lang,palette:e.themeMode.palette}}),(function(e){return{}}))(B);function A(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var W=(window.innerWidth-32)/20;function D(e){var t=e.lang,a=e.themeMode,n=e.history,c=e.user_id,o=Object(L.d)(),i=Object(w.a)(a),g=P(r.a.useState({}),2),E=g[0],b=g[1],x=P(r.a.useState(null),2),N=x[0],O=x[1],S=P(r.a.useState(null),2),C=S[0],I=S[1],_=P(r.a.useState(!0),2),z=_[0],M=_[1],B=P(r.a.useState(!1),2),D=B[0],F=B[1],R=r.a.useCallback((function(e){M(!0),j.a.get("/gettags").then((function(e){b([{id:null}].concat(e.data))})).catch((function(e){console.log(e)})),j.a.post("/actions/users/getusermap",{user_id:e}).then((function(e){O(JSON.parse(e.data.result)),M(!1)})).catch((function(e){console.log(e),M(!1)}))}),[c]),q=r.a.useCallback((function(){j.a.post("/actions/users/getuserposts",{id:c}).then((function(e){I(e.data)}))}),[c]);return r.a.useEffect((function(){void 0!==e.location.defaultData?"fromFriend"===e.location.defaultData.mode&&(F(!0),R(e.location.defaultData.friend_id)):(R(c),q())}),[R,q]),r.a.createElement(k.a,{theme:i},r.a.createElement(s.a,null),r.a.createElement("div",{className:o.root},r.a.createElement(f.a,{container:!0,className:"".concat(o.height12),direction:"column",justify:"center",alignItems:"stretch"},r.a.createElement(f.a,{item:!0,className:"".concat(o.hiddenOverflow," ").concat(o.height2," ").concat(o.relativePosition),align:"center"},r.a.createElement(m.a,{variant:"h6",component:"div",className:"".concat(o.centerButton)},t.currLang.texts.DreamsMap)),r.a.createElement(f.a,{item:!0,className:"".concat(o.hiddenOverflow," ").concat(o.height9)},r.a.createElement("div",{style:{padding:16},className:"".concat(o.formControl," ").concat(o.fullMinWidthAbs)},z?r.a.createElement("div",{className:"".concat(o.formControl," ").concat(o.centerTextAlign)},r.a.createElement("div",{className:"".concat(o.inlineBlock," ").concat(o.relativePosition)},r.a.createElement(u.a,null)),r.a.createElement(m.a,{className:"".concat(o.relativePosition),component:"div"},t.currLang.texts.Loading)):r.a.createElement(l.TransformWrapper,{defaultScale:1.5,options:{minScale:.5,maxScale:2.5},zoomIn:{step:10},zoomOut:{step:10},doubleClick:{disabled:!0}},(function(e){var t,a,o,i=e.zoomIn,u=e.zoomOut,s=e.resetTransform;A(e,["zoomIn","zoomOut","resetTransform"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.TransformComponent,null,r.a.createElement("table",{style:{borderCollapse:"collapse"}},r.a.createElement("tbody",null,null!==N?(t=[],a=0,o=0,Object.keys(N).forEach((function(e){var i=[];Object.keys(N[e]).forEach((function(t){i.push(r.a.createElement(T,{key:"cell"+a+o,i:a,j:o,cellWidth:W,dreamMap:N,id:N[e][t].id,locations:E,history:n,user_id:c,posts:C,viewMode:D})),a++})),t.push(r.a.createElement("tr",{key:"row"+o},i)),o++,a=0})),t):r.a.createElement("tr",null,r.a.createElement("td",null))))),r.a.createElement(f.a,{container:!0,className:"tools",direction:"row",justify:"space-evenly",alignItems:"center",style:{marginTop:16}},r.a.createElement(f.a,{item:!0,xs:2,align:"center"}),r.a.createElement(f.a,{item:!0,xs:2,align:"center"},r.a.createElement(p.a,{size:"small",onClick:u},r.a.createElement(y.a,null))),r.a.createElement(f.a,{item:!0,xs:4,align:"center"},r.a.createElement(p.a,{size:"small",onClick:s},r.a.createElement(h.a,null))),r.a.createElement(f.a,{item:!0,xs:2,align:"center"},r.a.createElement(p.a,{size:"small",onClick:i},r.a.createElement(v.a,null))),r.a.createElement(f.a,{item:!0,xs:2,align:"center"})))})))),r.a.createElement(f.a,{item:!0,className:"".concat(o.mainGridBodyItem," ").concat(o.height1)},r.a.createElement(f.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center"},r.a.createElement(f.a,{item:!0},r.a.createElement(d.a,{className:o.actionButton,variant:"contained",color:"secondary",onClick:function(){n.push("/luciddreams")}},t.currLang.buttons.close)),D?r.a.createElement(r.a.Fragment,null):r.a.createElement(f.a,{item:!0},r.a.createElement(d.a,{className:o.actionButton,variant:"contained",color:"primary",onClick:function(){n.push("/addlocation")}},t.currLang.buttons.add)))))))}D.propTypes={themeMode:i.a.object.isRequired,lang:i.a.object.isRequired,user_id:i.a.number.isRequired};t.default=Object(c.b)((function(e){return{themeMode:e.themeMode,lang:e.lang,user_id:e.auth.user.id}}),(function(e){return{}}))(D)}}]);
//# sourceMappingURL=16.index-bundle.js.map