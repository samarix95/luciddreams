(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{879:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a(30),i=a(3),l=a.n(i),s=a(260),u=a(470),m=a(468),d=a(467),g=a(251),f=a(258),p=a(139),h=a(259),b=a(136),E=a(464),v=a(256),P=a(421),y=a(134),j=a(252),N=a(94),O=a(250),x=a(13),k=a(70),C=a(92),w=a(87),D=a(93),L=a(85),R=a(108),S=a.n(R),_=a(324),F=a.n(_),I=a(323),q=a.n(I);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),!0).forEach((function(t){B(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var U=r.a.lazy((function(){return a.e(9).then(a.bind(null,857))})),M=!0,T=!0,G={regular:0,cdream:0,is_public:0},z={nickname:null,about:null,role:null,fb:null,ig:null},J=[{id:1,url:"https://api.adorable.io/avatars/227/1.png"},{id:2,url:"https://api.adorable.io/avatars/227/2.png"},{id:3,url:"https://api.adorable.io/avatars/227/3.png"},{id:4,url:"https://api.adorable.io/avatars/227/4.png"},{id:5,url:"https://api.adorable.io/avatars/227/5.png"},{id:6,url:"https://api.adorable.io/avatars/227/6.png"},{id:7,url:"https://api.adorable.io/avatars/227/7.png"},{id:8,url:"https://api.adorable.io/avatars/227/8.png"},{id:9,url:"https://api.adorable.io/avatars/227/9.png"},{id:10,url:"https://api.adorable.io/avatars/227/10.png"},{id:11,url:"https://api.adorable.io/avatars/227/11.png"},{id:12,url:"https://api.adorable.io/avatars/227/12.png"},{id:13,url:"https://api.adorable.io/avatars/227/13.png"},{id:14,url:"https://api.adorable.io/avatars/227/14.png"},{id:15,url:"https://api.adorable.io/avatars/227/15.png"},{id:16,url:"https://api.adorable.io/avatars/227/16.png"}];function X(e){var t=e.lang,a=e.themeMode,n=e.history,c=e.user_id,o=e.userData,i=e.userDataError,l=e.userDataPending,C=e.fetchUserData,w=e.userPosts,D=e.userPostsError,R=e.userPostsPending,_=e.fetchUserPosts,I=e.connectPosts,W=e.connectPostsError,B=e.connectPostsPending,X=e.fetchConnectPosts;i&&(console.log("Profile"),console.log(i),alert("Error")),D&&(console.log("Profile"),console.log(D),alert("Error")),W&&(console.log("Profile"),console.log(W),alert("Error"));var K=Object(x.d)(),Q=Object(N.a)(a),V=H(r.a.useState(),2),Y=V[0],Z=V[1],$=H(r.a.useState(!1),2),ee=$[0],te=$[1],ae=H(r.a.useState(!1),2),ne=ae[0],re=ae[1],ce=r.a.useRef(null),oe=H(r.a.useState(!1),2),ie=oe[0],le=oe[1],se=H(r.a.useState(z),2),ue=se[0],me=se[1],de=H(r.a.useState(G),2),ge=de[0],fe=de[1],pe=H(r.a.useState(!0),2),he=pe[0],be=pe[1],Ee=H(r.a.useState(!1),2),ve=Ee[0],Pe=Ee[1],ye=H(r.a.useState(""),2),je=ye[0],Ne=ye[1],Oe=H(r.a.useState(null),2),xe=Oe[0],ke=Oe[1];if(!l&&null==i&&!M){M=!0;var Ce=ue;Ce=A({},Ce,{nickname:o.nickname}),Ce=A({},Ce,{role:o.roles}),Ce=A({},Ce,{about:o.about}),Ce=A({},Ce,{fb:o.fb}),Ce=A({},Ce,{ig:o.ig}),me(Ce),Ne(o.about),be(!1)}if(!R&&null==D&&!T&&!ie){T=!0;var we=ge;we=A({},we,{regular:Object.keys(w.filter((function(e){return 0===e.post_type&&e}))).length}),we=A({},we,{cdream:Object.keys(w.filter((function(e){return 1===e.post_type&&e}))).length}),we=A({},we,{is_public:Object.keys(w.filter((function(e){return 1===e.is_public&&e}))).length}),fe(we)}if(!B&&null==W&&!T&&ie){T=!0;var De=ge;De=A({},De,{is_public:Object.keys(I.filter((function(e){return 1===e.is_public&&e}))).length}),fe(De)}var Le=r.a.useCallback((function(e){M=!1,T=!1,fe(A({},G)),me(A({},z));var t=Object(L.b)();C(e,t),c===e?_(e,t):X(e,t)}),[Y]);return r.a.useEffect((function(){if(void 0!==e.location.defaultData?(Le(e.location.defaultData.friend_id),Z(e.location.defaultData.friend_id),le(!0)):(Le(c),Z(c)),ee){var t=ce.current;null!==t&&t.focus()}}),[ee]),r.a.createElement(O.a,{theme:Q},r.a.createElement(g.a,null),ne?r.a.createElement(U,{open:ne,user_id:Y,closeAction:function(){re(!1)},setProfile:function(e){Z(e),Le(e),le(!0)}}):r.a.createElement(r.a.Fragment,null),r.a.createElement(E.a,{open:ee,scroll:"paper",fullWidth:!0,maxWidth:"md","aria-labelledby":"avatar-dialog-title","aria-describedby":"avatar-dialog-description"},r.a.createElement(d.a,{id:"avatar-dialog-title"},t.currLang.texts.Avatar),r.a.createElement(m.a,{dividers:!0},r.a.createElement(j.a,{container:!0,className:"".concat(K.height12),id:"avatar-dialog-description",spacing:2},J.map((function(e,t){return r.a.createElement(j.a,{item:!0,xs:4,sm:3,key:t},r.a.createElement("div",{className:"".concat(K.relativePosition," ").concat(K.fullWidth),style:{height:0,paddingBottom:"100%"}},r.a.createElement(p.a,{onClick:function(){return t=e.id,void ke(t);var t},className:"".concat(K.absolutePosition," ").concat(K.fullWidth," ").concat(K.fullHeight," ").concat(K.topLeft),style:{borderRadius:"50%"}},r.a.createElement(P.a,{src:e.url,className:"".concat(K.absolutePosition," ").concat(K.fullWidth," ").concat(K.fullHeight)})),xe===e.id?r.a.createElement(S.a,{className:"".concat(K.absolutePosition," ").concat(K.topRight)}):r.a.createElement(r.a.Fragment,null)))})))),r.a.createElement(u.a,null,r.a.createElement(v.a,{onClick:function(){te(!1)},color:"secondary"},t.currLang.buttons.cancel),r.a.createElement(v.a,{onClick:function(){te(!1)},color:"primary"},t.currLang.buttons.Save))),r.a.createElement("div",{className:K.root},r.a.createElement(j.a,{className:"".concat(K.height12),container:!0,direction:"column",justify:"center",alignItems:"stretch"},r.a.createElement(j.a,{item:!0,className:"".concat(K.mainGridBodyItem," ").concat(K.height11)},r.a.createElement(j.a,{className:"".concat(K.height5," ").concat(K.relativePosition),container:!0},r.a.createElement(j.a,{item:!0,xs:12,sm:6,className:"".concat(K.relativePosition)},r.a.createElement(h.a,{disabled:!!ie,className:"".concat(K.formControl),onClick:function(){te(!0)}},r.a.createElement(P.a,{src:"/images/example.jpg",style:{width:"120px",height:"120px"}}))),r.a.createElement(j.a,{item:!0,xs:12,sm:6,className:"".concat(K.relativePosition)},r.a.createElement("div",{className:"".concat(K.formControl)},r.a.createElement(f.a,{variant:"h5",align:"center",color:"textPrimary"},ue.nickname),r.a.createElement(f.a,{variant:"body2",align:"center",color:"textPrimary"},0===ue.role?t.currLang.texts.Admin:1===ue.role?t.currLang.texts.Moderator:t.currLang.texts.User)))),r.a.createElement(j.a,{className:"".concat(K.height3," ").concat(K.relativePosition),container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(j.a,{item:!0,xs:7},r.a.createElement(j.a,{className:"".concat(K.height3)},r.a.createElement(f.a,{align:"center"},t.currLang.texts.InfoDreams,":")),r.a.createElement(j.a,{className:"".concat(K.height9),container:!0,direction:"column",justify:"center",alignItems:"stretch"},r.a.createElement(j.a,{className:"".concat(K.height4),container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(j.a,{item:!0,xs:6},r.a.createElement(f.a,null,t.currLang.texts.Public,":")),r.a.createElement(j.a,{item:!0,xs:1}),r.a.createElement(j.a,{item:!0,xs:2},r.a.createElement(f.a,{align:"center"},ge.is_public))),ie?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:"".concat(K.height4),container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(j.a,{item:!0,xs:6},r.a.createElement(f.a,null,t.currLang.texts.Regular,":")),r.a.createElement(j.a,{item:!0,xs:1}),r.a.createElement(j.a,{item:!0,xs:2},r.a.createElement(f.a,{align:"center"},ge.regular))),r.a.createElement(j.a,{className:"".concat(K.height4),container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(j.a,{item:!0,xs:6},r.a.createElement(f.a,null,t.currLang.texts.Cdream,":")),r.a.createElement(j.a,{item:!0,xs:1}),r.a.createElement(j.a,{item:!0,xs:2},r.a.createElement(f.a,{align:"center"},ge.cdream)))))),r.a.createElement(j.a,{item:!0,xs:5,className:"".concat(K.relativePosition)},r.a.createElement(j.a,{className:"".concat(K.height12),container:!0,direction:"column",justify:"center",alignItems:"stretch"},ie?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:"".concat(K.height6)},r.a.createElement("div",{className:"".concat(K.relativePosition," ").concat(K.fullHeight)},r.a.createElement(v.a,{className:"".concat(K.formControl," ").concat(K.fullWidth," ").concat(K.width10),variant:"contained",color:"primary",onClick:function(){n.push({pathname:"/dreams",defaultData:{mode:"fromFriend",friend_id:Y,prevUrl:"/profile"}})}},t.currLang.buttons.dreamJoirnal))),r.a.createElement(j.a,{className:"".concat(K.height6)},r.a.createElement("div",{className:"".concat(K.relativePosition," ").concat(K.fullHeight)},r.a.createElement(v.a,{className:"".concat(K.formControl," ").concat(K.fullWidth," ").concat(K.width10),variant:"contained",color:"primary",onClick:function(){n.push({pathname:"/dreammap",defaultData:{mode:"fromFriend",nickName:ue.nickname,friend_id:Y,prevUrl:"/profile"}})}},t.currLang.texts.DreamsMap)))):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:"".concat(K.height6)},r.a.createElement("div",{className:"".concat(K.relativePosition," ").concat(K.fullHeight)},r.a.createElement(v.a,{className:"".concat(K.formControl," ").concat(K.fullWidth," ").concat(K.width10),variant:"contained",color:"primary",onClick:function(){re(!0)}},t.currLang.buttons.Connections))))))),r.a.createElement(j.a,{className:"".concat(K.height2," ").concat(K.relativePosition)},r.a.createElement(y.a,{className:"".concat(K.mainGridDreamsContainer," ").concat(K.mainGridDreamsBodyItemContainerPaper)},he?r.a.createElement("div",{className:"".concat(K.formControl," ").concat(K.centerTextAlign)},r.a.createElement("div",{className:"".concat(K.inlineBlock," ").concat(K.relativePosition)},r.a.createElement(s.a,null)),r.a.createElement(f.a,{className:"".concat(K.relativePosition),component:"div"},t.currLang.texts.Loading)):ve?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(K.absolutePosition," ").concat(K.hiddenOverflowX," ").concat(K.fullWidth," ").concat(K.fullHeight," ").concat(K.topLeft)},r.a.createElement(b.a,{className:"".concat(K.absolutePosition," ").concat(K.centerText),value:je,onChange:function(e){Ne(e.target.value)},multiline:!0})),ie?r.a.createElement(r.a.Fragment,null):r.a.createElement(h.a,{size:"small",className:"".concat(K.topLeftCorner),onClick:function(){if(ue.about!==je){be(!0);var e={id:Y,nickname:ue.nickname,about:je};k.g.post("/actions/users/updateuserdata",e).then((function(e){var t=ue;t=A({},t,{about:je}),me(t),be(!1)})).catch((function(e){alert("Cant update profile"),be(!1)}))}Pe(!1)}},r.a.createElement(P.a,null,r.a.createElement(q.a,null)))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(K.absolutePosition," ").concat(K.hiddenOverflowX," ").concat(K.fullWidth," ").concat(K.fullHeight," ").concat(K.topLeft)},r.a.createElement(f.a,{className:"".concat(K.absolutePosition," ").concat(K.centerText),component:"div"},ue.about)),ie?r.a.createElement(r.a.Fragment,null):r.a.createElement(h.a,{size:"small",className:"".concat(K.topLeftCorner),onClick:function(){Pe(!0)}},r.a.createElement(P.a,null,r.a.createElement(F.a,null)))))),r.a.createElement(j.a,{className:"".concat(K.height2," ").concat(K.relativePosition)})),r.a.createElement(j.a,{item:!0,className:"".concat(K.mainGridBodyItem," ").concat(K.height1)},r.a.createElement(j.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(v.a,{className:K.actionButton,variant:"contained",color:"secondary",onClick:function(){n.push("/luciddreams")}},t.currLang.buttons.Back)),ie?r.a.createElement(j.a,{item:!0},r.a.createElement(v.a,{className:K.actionButton,onClick:function(){Z(c),Le(c),le(!1)},variant:"contained",color:"secondary"},t.currLang.buttons.Home)):r.a.createElement(r.a.Fragment,null))))))}X.propTypes={themeMode:l.a.object.isRequired,lang:l.a.object.isRequired,user_id:l.a.number.isRequired,userDataError:l.a.object.isRequired,userData:l.a.object.isRequired,userDataPending:l.a.object.isRequired,userPostsError:l.a.object.isRequired,userPosts:l.a.object.isRequired,userPostsPending:l.a.object.isRequired,connectPostsError:l.a.object.isRequired,connectPosts:l.a.object.isRequired,connectPostsPending:l.a.object.isRequired};t.default=Object(c.b)((function(e){return{themeMode:e.themeMode,lang:e.lang,user_id:e.auth.user.id,userDataError:Object(C.b)(e),userData:Object(C.a)(e),userDataPending:Object(C.c)(e),userPostsError:Object(w.b)(e),userPosts:Object(w.a)(e),userPostsPending:Object(w.c)(e),connectPostsError:Object(D.c)(e),connectPosts:Object(D.b)(e),connectPostsPending:Object(D.d)(e)}}),(function(e){return Object(o.bindActionCreators)({fetchUserData:k.d,fetchUserPosts:k.f,fetchConnectPosts:k.a},e)}))(X)}}]);
//# sourceMappingURL=17.index-bundle.js.map