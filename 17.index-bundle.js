(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{874:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a(3),i=a.n(l),o=a(254),s=a(464),u=a(462),m=a(461),d=a(245),g=a(252),p=a(133),f=a(253),h=a(247),E=a(458),b=a(250),v=a(416),y=a(128),N=a(246),x=a(89),j=a(244),P=a(12),O=a(70),k=a(102),w=a.n(k),C=a(318),L=a.n(C),S=a(317),I=a.n(S);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){B(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],n=!0,r=!1,c=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,c=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var W=r.a.lazy((function(){return a.e(9).then(a.bind(null,852))})),A=[{id:1,url:"https://api.adorable.io/avatars/227/1.png"},{id:2,url:"https://api.adorable.io/avatars/227/2.png"},{id:3,url:"https://api.adorable.io/avatars/227/3.png"},{id:4,url:"https://api.adorable.io/avatars/227/4.png"},{id:5,url:"https://api.adorable.io/avatars/227/5.png"},{id:6,url:"https://api.adorable.io/avatars/227/6.png"},{id:7,url:"https://api.adorable.io/avatars/227/7.png"},{id:8,url:"https://api.adorable.io/avatars/227/8.png"},{id:9,url:"https://api.adorable.io/avatars/227/9.png"},{id:10,url:"https://api.adorable.io/avatars/227/10.png"},{id:11,url:"https://api.adorable.io/avatars/227/11.png"},{id:12,url:"https://api.adorable.io/avatars/227/12.png"},{id:13,url:"https://api.adorable.io/avatars/227/13.png"},{id:14,url:"https://api.adorable.io/avatars/227/14.png"},{id:15,url:"https://api.adorable.io/avatars/227/15.png"},{id:16,url:"https://api.adorable.io/avatars/227/16.png"}];function H(e){var t=e.lang,a=e.themeMode,n=e.history,c=e.user_id,l=Object(P.d)(),i=Object(x.a)(a),k=D(r.a.useState(c),2),C=k[0],S=k[1],_=D(r.a.useState(!1),2),B=_[0],H=_[1],R=D(r.a.useState(!1),2),T=R[0],M=R[1],G=r.a.useRef(null),q=D(r.a.useState(!1),2),z=q[0],J=q[1],U=D(r.a.useState(!1),2),X=U[0],K=U[1],Q=D(r.a.useState({nickname:null,about:null,role:null,fb:null,ig:null}),2),V=Q[0],Y=Q[1],Z=D(r.a.useState({total:0,regular:0,cdream:0,is_public:0}),2),$=Z[0],ee=Z[1],te=D(r.a.useState(!0),2),ae=te[0],ne=te[1],re=D(r.a.useState(!1),2),ce=re[0],le=re[1],ie=D(r.a.useState(""),2),oe=ie[0],se=ie[1],ue=D(r.a.useState(null),2),me=ue[0],de=ue[1],ge=function(){J(!0)},pe=r.a.useCallback((function(e){O.a.post("/actions/users/getuserdata",{id:e}).then((function(e){var t=V;t=F({},t,{nickname:e.data.result.nickname}),t=F({},t,{role:e.data.result.roles}),e.data.result.about?(t=F({},t,{about:e.data.result.about}),se(e.data.result.about)):(t=F({},t,{about:""}),se("")),t=F({},t,{fb:e.data.result.fb}),t=F({},t,{ig:e.data.result.ig}),Y(t),ne(!1)})),O.a.post("/actions/users/getuserposts",{id:e}).then((function(e){var t=$;t=F({},t,{regular:Object.keys(e.data.filter((function(e){return 0===e.post_type&&e}))).length}),t=F({},t,{cdream:Object.keys(e.data.filter((function(e){return 1===e.post_type&&e}))).length}),t=F({},t,{is_public:Object.keys(e.data.filter((function(e){return 1===e.is_public&&e}))).length}),t=F({},t,{total:Object.keys(e.data.filter((function(e){return 0===e.post_type&&e}))).length+Object.keys(e.data.filter((function(e){return 1===e.post_type&&e}))).length}),ee(t)})).catch((function(e){alert("Error get user posts data: "+e)}))}),[C]);return r.a.useEffect((function(){if(void 0!==e.location.defaultData?(pe(e.location.defaultData.friend_id),K(!0)):pe(c),B){var t=G.current;null!==t&&t.focus()}}),[B]),r.a.createElement(j.a,{theme:i},r.a.createElement(d.a,null),T?r.a.createElement(W,{open:T,user_id:C,closeAction:function(){M(!1)},setProfile:function(e){S(e),pe(e),K(!0)}}):r.a.createElement(r.a.Fragment,null),r.a.createElement(E.a,{open:B,scroll:"paper",fullWidth:!0,maxWidth:"md","aria-labelledby":"avatar-dialog-title","aria-describedby":"avatar-dialog-description"},r.a.createElement(m.a,{id:"avatar-dialog-title"},t.currLang.texts.Avatar),r.a.createElement(u.a,{dividers:!0},r.a.createElement(N.a,{container:!0,className:"".concat(l.height12),id:"avatar-dialog-description",spacing:2},A.map((function(e,t){return r.a.createElement(N.a,{item:!0,xs:4,sm:3,key:t},r.a.createElement("div",{className:"".concat(l.relativePosition," ").concat(l.fullWidth),style:{height:0,paddingBottom:"100%"}},r.a.createElement(p.a,{onClick:function(){return t=e.id,void de(t);var t},className:"".concat(l.absolutePosition," ").concat(l.fullWidth," ").concat(l.fullHeight," ").concat(l.topLeft),style:{borderRadius:"50%"}},r.a.createElement(v.a,{src:e.url,className:"".concat(l.absolutePosition," ").concat(l.fullWidth," ").concat(l.fullHeight)})),me===e.id?r.a.createElement(w.a,{className:"".concat(l.absolutePosition," ").concat(l.topRight)}):r.a.createElement(r.a.Fragment,null)))})))),r.a.createElement(s.a,null,r.a.createElement(b.a,{onClick:function(){H(!1)},color:"secondary"},t.currLang.buttons.cancel),r.a.createElement(b.a,{onClick:ge,color:"primary"},t.currLang.buttons.Save))),r.a.createElement("div",{className:l.root},r.a.createElement(N.a,{className:"".concat(l.height12),container:!0,direction:"column",justify:"center",alignItems:"stretch"},r.a.createElement(N.a,{item:!0,className:"".concat(l.mainGridBodyItem," ").concat(l.height11)},r.a.createElement(N.a,{container:!0,className:"".concat(l.height5," ").concat(l.relativePosition)},r.a.createElement(N.a,{item:!0,xs:12,sm:6,className:"".concat(l.relativePosition)},r.a.createElement(f.a,{disabled:!z,className:"".concat(l.formControl),onClick:function(){H(!0)}},r.a.createElement(v.a,{src:"/images/example.jpg",style:{width:"120px",height:"120px"}}))),r.a.createElement(N.a,{item:!0,xs:12,sm:6,className:"".concat(l.relativePosition)},r.a.createElement("div",{className:"".concat(l.formControl)},r.a.createElement(g.a,{variant:"h5",align:"center",color:"textPrimary"},V.nickname),r.a.createElement(g.a,{variant:"body2",align:"center",color:"textPrimary"},0===V.role?t.currLang.texts.Admin:1===V.role?t.currLang.texts.Moderator:t.currLang.texts.User)))),r.a.createElement(N.a,{container:!0,className:"".concat(l.height3," ").concat(l.relativePosition),direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(N.a,{item:!0,xs:7},r.a.createElement(N.a,{className:"".concat(l.height2)},r.a.createElement(g.a,{align:"center",gutterBottom:!0},t.currLang.texts.InfoDreams,":")),r.a.createElement(N.a,{className:"".concat(l.height10),container:!0,direction:"column",justify:"center",alignItems:"stretch"},r.a.createElement(N.a,{className:"".concat(l.height3),container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(g.a,null,t.currLang.texts.Public,":")),r.a.createElement(N.a,{item:!0,xs:1}),r.a.createElement(N.a,{item:!0,xs:2},r.a.createElement(g.a,{align:"center"},$.is_public))),X?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{className:"".concat(l.height3),container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(g.a,null,t.currLang.texts.Regular,":")),r.a.createElement(N.a,{item:!0,xs:1}),r.a.createElement(N.a,{item:!0,xs:2},r.a.createElement(g.a,{align:"center"},$.regular))),r.a.createElement(N.a,{className:"".concat(l.height3),container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(g.a,null,t.currLang.texts.Cdream,":")),r.a.createElement(N.a,{item:!0,xs:1}),r.a.createElement(N.a,{item:!0,xs:2},r.a.createElement(g.a,{align:"center"},$.cdream))),r.a.createElement(N.a,{className:"".concat(l.height3),container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(N.a,{item:!0,xs:6},r.a.createElement(g.a,null,t.currLang.texts.Total,":")),r.a.createElement(N.a,{item:!0,xs:1}),r.a.createElement(N.a,{item:!0,xs:2},r.a.createElement(g.a,{align:"center"},$.total)))))),r.a.createElement(N.a,{item:!0,xs:5,className:"".concat(l.relativePosition)},r.a.createElement(N.a,{className:"".concat(l.height12),container:!0,direction:"column",justify:"center",alignItems:"stretch"},X?r.a.createElement(N.a,{className:"".concat(l.height6)},r.a.createElement("div",{className:"".concat(l.relativePosition," ").concat(l.fullHeight)},r.a.createElement(b.a,{className:"".concat(l.formControl," ").concat(l.fullWidth," ").concat(l.width10),variant:"contained",color:"primary",onClick:function(){n.push({pathname:"/dreams",defaultData:{mode:"fromFriend",friend_id:C,prevUrl:"/profile"}})}},t.currLang.buttons.dreamJoirnal))):r.a.createElement(N.a,{className:"".concat(l.height6)},r.a.createElement("div",{className:"".concat(l.relativePosition," ").concat(l.fullHeight)},r.a.createElement(b.a,{className:"".concat(l.formControl," ").concat(l.fullWidth," ").concat(l.width10),variant:"contained",color:"primary",onClick:function(){M(!0)}},t.currLang.buttons.Connections)))))),r.a.createElement(N.a,{className:"".concat(l.height2)},r.a.createElement(y.a,{className:"".concat(l.mainGridDreamsContainer," ").concat(l.mainGridDreamsBodyItemContainerPaper)},ae?r.a.createElement("div",{className:"".concat(l.formControl," ").concat(l.centerTextAlign)},r.a.createElement("div",{className:"".concat(l.inlineBlock," ").concat(l.relativePosition)},r.a.createElement(o.a,null)),r.a.createElement(g.a,{className:"".concat(l.relativePosition),component:"div"},t.currLang.texts.Loading)):ce?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(l.absolutePosition," ").concat(l.hiddenOverflowX," ").concat(l.fullWidth," ").concat(l.fullHeight," ").concat(l.topLeft)},r.a.createElement(h.a,{className:"".concat(l.absolutePosition," ").concat(l.centerText),value:oe,onChange:function(e){se(e.target.value)},multiline:!0})),X?r.a.createElement(r.a.Fragment,null):z?r.a.createElement(f.a,{size:"small",className:"".concat(l.topLeftCorner),onClick:function(){if(V.about!==oe){ne(!0);var e={id:C,nickname:V.nickname,about:oe};O.a.post("/actions/users/updateuserdata",e).then((function(e){var t=V;t=F({},t,{about:oe}),Y(t),ne(!1)})).catch((function(e){alert("Cant update profile"),ne(!1)}))}le(!1)}},r.a.createElement(I.a,null)):r.a.createElement(r.a.Fragment,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(l.absolutePosition," ").concat(l.hiddenOverflowX," ").concat(l.fullWidth," ").concat(l.fullHeight," ").concat(l.topLeft)},r.a.createElement(g.a,{className:"".concat(l.absolutePosition," ").concat(l.centerText),noWrap:!0,component:"div"},V.about)),X?r.a.createElement(r.a.Fragment,null):z?r.a.createElement(f.a,{size:"small",className:"".concat(l.topLeftCorner),onClick:function(){le(!0)}},r.a.createElement(L.a,null)):r.a.createElement(r.a.Fragment,null)))),r.a.createElement(N.a,{container:!0,className:"".concat(l.height2," ").concat(l.relativePosition)})),r.a.createElement(N.a,{item:!0,className:"".concat(l.mainGridBodyItem," ").concat(l.height1)},r.a.createElement(N.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center"},r.a.createElement(N.a,{item:!0},r.a.createElement(b.a,{className:l.actionButton,variant:"contained",color:"secondary",onClick:function(){n.push("/luciddreams")}},t.currLang.buttons.close)),X?r.a.createElement(N.a,{item:!0},r.a.createElement(b.a,{className:l.actionButton,onClick:function(){S(c),pe(c),K(!1)},variant:"contained",color:"secondary"},t.currLang.buttons.Home)):r.a.createElement(N.a,{item:!0},z?r.a.createElement(b.a,{className:l.actionButton,onClick:function(){J(!1)},variant:"contained",color:"secondary"},t.currLang.buttons.Save):r.a.createElement(b.a,{className:l.actionButton,onClick:ge,variant:"contained",color:"secondary"},t.currLang.buttons.Edit)))))))}H.propTypes={themeMode:i.a.object.isRequired,lang:i.a.object.isRequired,user_id:i.a.number.isRequired};t.default=Object(c.b)((function(e){return{themeMode:e.themeMode,lang:e.lang,user_id:e.auth.user.id}}),(function(e){return{}}))(H)}}]);
//# sourceMappingURL=17.index-bundle.js.map