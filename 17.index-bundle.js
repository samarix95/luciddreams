(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{876:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(23),l=t(3),i=t.n(l),o=t(256),s=t(466),m=t(464),u=t(463),d=t(247),p=t(254),g=t(135),f=t(255),h=t(132),E=t(460),b=t(252),v=t(418),y=t(130),N=t(248),x=t(91),P=t(246),j=t(12),k=t(70),O=t(104),w=t.n(O),C=t(320),L=t.n(C),S=t(319),_=t.n(S);function D(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function F(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?D(Object(t),!0).forEach((function(a){I(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function I(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function W(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],n=!0,c=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(t.push(l.value),!a||t.length!==a);n=!0);}catch(e){c=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(c)throw r}}return t}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var B=c.a.lazy((function(){return t.e(9).then(t.bind(null,854))})),H=[{id:1,url:"https://api.adorable.io/avatars/227/1.png"},{id:2,url:"https://api.adorable.io/avatars/227/2.png"},{id:3,url:"https://api.adorable.io/avatars/227/3.png"},{id:4,url:"https://api.adorable.io/avatars/227/4.png"},{id:5,url:"https://api.adorable.io/avatars/227/5.png"},{id:6,url:"https://api.adorable.io/avatars/227/6.png"},{id:7,url:"https://api.adorable.io/avatars/227/7.png"},{id:8,url:"https://api.adorable.io/avatars/227/8.png"},{id:9,url:"https://api.adorable.io/avatars/227/9.png"},{id:10,url:"https://api.adorable.io/avatars/227/10.png"},{id:11,url:"https://api.adorable.io/avatars/227/11.png"},{id:12,url:"https://api.adorable.io/avatars/227/12.png"},{id:13,url:"https://api.adorable.io/avatars/227/13.png"},{id:14,url:"https://api.adorable.io/avatars/227/14.png"},{id:15,url:"https://api.adorable.io/avatars/227/15.png"},{id:16,url:"https://api.adorable.io/avatars/227/16.png"}];function A(e){var a=e.lang,t=e.themeMode,n=e.history,r=e.user_id,l=Object(j.d)(),i=Object(x.a)(t),O=W(c.a.useState(),2),C=O[0],S=O[1],D=W(c.a.useState(!1),2),I=D[0],A=D[1],R=W(c.a.useState(!1),2),M=R[0],T=R[1],G=c.a.useRef(null),q=W(c.a.useState(!1),2),z=q[0],J=q[1],U=W(c.a.useState({nickname:null,about:null,role:null,fb:null,ig:null}),2),X=U[0],K=U[1],Q=W(c.a.useState({regular:0,cdream:0,is_public:0}),2),V=Q[0],Y=Q[1],Z=W(c.a.useState(!0),2),$=Z[0],ee=Z[1],ae=W(c.a.useState(!1),2),te=ae[0],ne=ae[1],ce=W(c.a.useState(""),2),re=ce[0],le=ce[1],ie=W(c.a.useState(null),2),oe=ie[0],se=ie[1],me=c.a.useCallback((function(e){k.c.post("/actions/users/getuserdata",{id:e}).then((function(e){var a=X;a=F({},a,{nickname:e.data.result.nickname}),a=F({},a,{role:e.data.result.roles}),e.data.result.about?(a=F({},a,{about:e.data.result.about}),le(e.data.result.about)):(a=F({},a,{about:""}),le("")),a=F({},a,{fb:e.data.result.fb}),a=F({},a,{ig:e.data.result.ig}),K(a),ee(!1)})),k.c.post("/actions/users/getuserposts",{id:e}).then((function(e){var a=V;a=F({},a,{regular:Object.keys(e.data.filter((function(e){return 0===e.post_type&&e}))).length}),a=F({},a,{cdream:Object.keys(e.data.filter((function(e){return 1===e.post_type&&e}))).length}),a=F({},a,{is_public:Object.keys(e.data.filter((function(e){return 1===e.is_public&&e}))).length}),Y(a)})).catch((function(e){alert("Error get user posts data: "+e)}))}),[C]);return c.a.useEffect((function(){if(void 0!==e.location.defaultData?(me(e.location.defaultData.friend_id),S(e.location.defaultData.friend_id),J(!0)):(me(r),S(r)),I){var a=G.current;null!==a&&a.focus()}}),[I]),c.a.createElement(P.a,{theme:i},c.a.createElement(d.a,null),M?c.a.createElement(B,{open:M,user_id:C,closeAction:function(){T(!1)},setProfile:function(e){S(e),me(e),J(!0)}}):c.a.createElement(c.a.Fragment,null),c.a.createElement(E.a,{open:I,scroll:"paper",fullWidth:!0,maxWidth:"md","aria-labelledby":"avatar-dialog-title","aria-describedby":"avatar-dialog-description"},c.a.createElement(u.a,{id:"avatar-dialog-title"},a.currLang.texts.Avatar),c.a.createElement(m.a,{dividers:!0},c.a.createElement(N.a,{container:!0,className:"".concat(l.height12),id:"avatar-dialog-description",spacing:2},H.map((function(e,a){return c.a.createElement(N.a,{item:!0,xs:4,sm:3,key:a},c.a.createElement("div",{className:"".concat(l.relativePosition," ").concat(l.fullWidth),style:{height:0,paddingBottom:"100%"}},c.a.createElement(g.a,{onClick:function(){return a=e.id,void se(a);var a},className:"".concat(l.absolutePosition," ").concat(l.fullWidth," ").concat(l.fullHeight," ").concat(l.topLeft),style:{borderRadius:"50%"}},c.a.createElement(v.a,{src:e.url,className:"".concat(l.absolutePosition," ").concat(l.fullWidth," ").concat(l.fullHeight)})),oe===e.id?c.a.createElement(w.a,{className:"".concat(l.absolutePosition," ").concat(l.topRight)}):c.a.createElement(c.a.Fragment,null)))})))),c.a.createElement(s.a,null,c.a.createElement(b.a,{onClick:function(){A(!1)},color:"secondary"},a.currLang.buttons.cancel),c.a.createElement(b.a,{onClick:function(){A(!1)},color:"primary"},a.currLang.buttons.Save))),c.a.createElement("div",{className:l.root},c.a.createElement(N.a,{className:"".concat(l.height12),container:!0,direction:"column",justify:"center",alignItems:"stretch"},c.a.createElement(N.a,{item:!0,className:"".concat(l.mainGridBodyItem," ").concat(l.height11)},c.a.createElement(N.a,{className:"".concat(l.height5," ").concat(l.relativePosition),container:!0},c.a.createElement(N.a,{item:!0,xs:12,sm:6,className:"".concat(l.relativePosition)},c.a.createElement(f.a,{disabled:!!z,className:"".concat(l.formControl),onClick:function(){A(!0)}},c.a.createElement(v.a,{src:"/images/example.jpg",style:{width:"120px",height:"120px"}}))),c.a.createElement(N.a,{item:!0,xs:12,sm:6,className:"".concat(l.relativePosition)},c.a.createElement("div",{className:"".concat(l.formControl)},c.a.createElement(p.a,{variant:"h5",align:"center",color:"textPrimary"},X.nickname),c.a.createElement(p.a,{variant:"body2",align:"center",color:"textPrimary"},0===X.role?a.currLang.texts.Admin:1===X.role?a.currLang.texts.Moderator:a.currLang.texts.User)))),c.a.createElement(N.a,{className:"".concat(l.height3," ").concat(l.relativePosition),container:!0,direction:"row",justify:"center",alignItems:"stretch"},c.a.createElement(N.a,{item:!0,xs:7},c.a.createElement(N.a,{className:"".concat(l.height3)},c.a.createElement(p.a,{align:"center"},a.currLang.texts.InfoDreams,":")),c.a.createElement(N.a,{className:"".concat(l.height9),container:!0,direction:"column",justify:"center",alignItems:"stretch"},c.a.createElement(N.a,{className:"".concat(l.height4),container:!0,direction:"row",justify:"center",alignItems:"stretch"},c.a.createElement(N.a,{item:!0,xs:6},c.a.createElement(p.a,null,a.currLang.texts.Public,":")),c.a.createElement(N.a,{item:!0,xs:1}),c.a.createElement(N.a,{item:!0,xs:2},c.a.createElement(p.a,{align:"center"},V.is_public))),z?c.a.createElement(c.a.Fragment,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(N.a,{className:"".concat(l.height4),container:!0,direction:"row",justify:"center",alignItems:"stretch"},c.a.createElement(N.a,{item:!0,xs:6},c.a.createElement(p.a,null,a.currLang.texts.Regular,":")),c.a.createElement(N.a,{item:!0,xs:1}),c.a.createElement(N.a,{item:!0,xs:2},c.a.createElement(p.a,{align:"center"},V.regular))),c.a.createElement(N.a,{className:"".concat(l.height4),container:!0,direction:"row",justify:"center",alignItems:"stretch"},c.a.createElement(N.a,{item:!0,xs:6},c.a.createElement(p.a,null,a.currLang.texts.Cdream,":")),c.a.createElement(N.a,{item:!0,xs:1}),c.a.createElement(N.a,{item:!0,xs:2},c.a.createElement(p.a,{align:"center"},V.cdream)))))),c.a.createElement(N.a,{item:!0,xs:5,className:"".concat(l.relativePosition)},c.a.createElement(N.a,{className:"".concat(l.height12),container:!0,direction:"column",justify:"center",alignItems:"stretch"},z?c.a.createElement(c.a.Fragment,null,c.a.createElement(N.a,{className:"".concat(l.height6)},c.a.createElement("div",{className:"".concat(l.relativePosition," ").concat(l.fullHeight)},c.a.createElement(b.a,{className:"".concat(l.formControl," ").concat(l.fullWidth," ").concat(l.width10),variant:"contained",color:"primary",onClick:function(){n.push({pathname:"/dreams",defaultData:{mode:"fromFriend",friend_id:C,prevUrl:"/profile"}})}},a.currLang.buttons.dreamJoirnal))),c.a.createElement(N.a,{className:"".concat(l.height6)},c.a.createElement("div",{className:"".concat(l.relativePosition," ").concat(l.fullHeight)},c.a.createElement(b.a,{className:"".concat(l.formControl," ").concat(l.fullWidth," ").concat(l.width10),variant:"contained",color:"primary",onClick:function(){n.push({pathname:"/dreammap",defaultData:{mode:"fromFriend",nickName:X.nickname,friend_id:C,prevUrl:"/profile"}})}},a.currLang.texts.DreamsMap)))):c.a.createElement(c.a.Fragment,null,c.a.createElement(N.a,{className:"".concat(l.height6)},c.a.createElement("div",{className:"".concat(l.relativePosition," ").concat(l.fullHeight)},c.a.createElement(b.a,{className:"".concat(l.formControl," ").concat(l.fullWidth," ").concat(l.width10),variant:"contained",color:"primary",onClick:function(){T(!0)}},a.currLang.buttons.Connections))))))),c.a.createElement(N.a,{className:"".concat(l.height2," ").concat(l.relativePosition)},c.a.createElement(y.a,{className:"".concat(l.mainGridDreamsContainer," ").concat(l.mainGridDreamsBodyItemContainerPaper)},$?c.a.createElement("div",{className:"".concat(l.formControl," ").concat(l.centerTextAlign)},c.a.createElement("div",{className:"".concat(l.inlineBlock," ").concat(l.relativePosition)},c.a.createElement(o.a,null)),c.a.createElement(p.a,{className:"".concat(l.relativePosition),component:"div"},a.currLang.texts.Loading)):te?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"".concat(l.absolutePosition," ").concat(l.hiddenOverflowX," ").concat(l.fullWidth," ").concat(l.fullHeight," ").concat(l.topLeft)},c.a.createElement(h.a,{className:"".concat(l.absolutePosition," ").concat(l.centerText),value:re,onChange:function(e){le(e.target.value)},multiline:!0})),z?c.a.createElement(c.a.Fragment,null):c.a.createElement(f.a,{size:"small",className:"".concat(l.topLeftCorner),onClick:function(){if(X.about!==re){ee(!0);var e={id:C,nickname:X.nickname,about:re};k.c.post("/actions/users/updateuserdata",e).then((function(e){var a=X;a=F({},a,{about:re}),K(a),ee(!1)})).catch((function(e){alert("Cant update profile"),ee(!1)}))}ne(!1)}},c.a.createElement(v.a,null,c.a.createElement(_.a,null)))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"".concat(l.absolutePosition," ").concat(l.hiddenOverflowX," ").concat(l.fullWidth," ").concat(l.fullHeight," ").concat(l.topLeft)},c.a.createElement(p.a,{className:"".concat(l.absolutePosition," ").concat(l.centerText),component:"div"},X.about)),z?c.a.createElement(c.a.Fragment,null):c.a.createElement(f.a,{size:"small",className:"".concat(l.topLeftCorner),onClick:function(){ne(!0)}},c.a.createElement(v.a,null,c.a.createElement(L.a,null)))))),c.a.createElement(N.a,{className:"".concat(l.height2," ").concat(l.relativePosition)})),c.a.createElement(N.a,{item:!0,className:"".concat(l.mainGridBodyItem," ").concat(l.height1)},c.a.createElement(N.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center"},c.a.createElement(N.a,{item:!0},c.a.createElement(b.a,{className:l.actionButton,variant:"contained",color:"secondary",onClick:function(){n.push("/luciddreams")}},a.currLang.buttons.Back)),z?c.a.createElement(N.a,{item:!0},c.a.createElement(b.a,{className:l.actionButton,onClick:function(){S(r),me(r),J(!1)},variant:"contained",color:"secondary"},a.currLang.buttons.Home)):c.a.createElement(c.a.Fragment,null))))))}A.propTypes={themeMode:i.a.object.isRequired,lang:i.a.object.isRequired,user_id:i.a.number.isRequired};a.default=Object(r.b)((function(e){return{themeMode:e.themeMode,lang:e.lang,user_id:e.auth.user.id}}),(function(e){return{}}))(A)}}]);
//# sourceMappingURL=17.index-bundle.js.map